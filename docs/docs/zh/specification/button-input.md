---
tags:
  - Interactive
  - Buttons
  - Options
  - Input
  - User Interface
---

# 交互

## 简介

MarkdownFlow 提供了强大而简洁的语法来创建交互元素以收集用户输入。这些交互会暂停内容投放，等待用户响应，然后根据输入继续投放个性化内容。

## 完整语法

交互元素的完整语法是：

```text
?[%{{variable}} Button1//id1 | Button2//id2 | ...input hint]
```

或者用于选项（多选）：

```text
?[%{{variable}} Option1//id1 || Option2//id2 || ...input hint]
```

**每个组件都是可选的**，让您能够灵活创建所需的确切交互。

## 核心组件

### 框架：`?[` 和 `]`

每个交互元素都以 `?[` 开始，以 `]` 结束。这些括号是**必需的**，标记了交互元素的边界：

```markdown
?[...内容放在这里...]
```

## 1. 按钮（单选）

按钮允许用户从多个选项中做出单一选择。它们使用单竖线（`|`）作为选项之间的分隔符。

### 基本语法

```markdown
?[%{{variable}} Button1 | Button2 | Button3]
```

### 使用 `%{{variable}}` 存储变量

`%` 符号决定变量的行为方式：

**带 `%` - 写入模式（存储输入）：**

```markdown
?[%{{choice}} Yes | No]
```

当用户点击 "Yes" 时，值 "Yes" 被存储到 `{{choice}}` 中。

**不带 `%` - 读取模式（使用变量值）：**

```markdown
?[{{userName}}, 点击这里继续]
```

如果 `{{userName}}` 包含 "Alice"，按钮显示："Alice, 点击这里继续"

**不使用变量：**

```markdown
?[ 继续 ]
```

这创建了一个简单的"继续"按钮，只是恢复内容流而不存储任何值。

### 使用 `//id` 的按钮 ID

您可以为按钮分配 ID，以将显示文本与存储值分离：

```markdown
?[%{{size}} 小//S | 中//M | 大//L]
```

- 显示："小"，"中"，"大"
- 存储的值："S"，"M"，"L"

这在以下情况很有用：

- 无论语言如何都需要一致的后端值
- 需要更短的处理值
- 用户友好的显示与技术值

## 2. 选项（多选）

选项允许用户选择多个项目。它们使用双竖线（`||`）作为选项之间的分隔符。

### 基本语法

```markdown
?[%{{variable}} Option1 || Option2 || Option3]
```

### 返回值格式

与返回单个字符串的按钮不同，选项返回**字符串数组**：

- 按钮：`{{color}} = "Red"`
- 选项：`{{skills}} = ["Python", "JavaScript", "Go"]`

### 变量和 ID 用法

变量和 ID 的工作方式与按钮相同：

- `%{{variable}}` 存储选择项
- `//id` 将显示与值分离
- 不带 `%`，使用变量值进行显示

## 3. 输入（文本录入）

输入字段允许用户输入自定义文本。它们使用 `...` 后跟提示。

### 基本语法

```markdown
?[%{{variable}}...在此输入文本]
```

### 变量用法

变量的工作方式如上所述 - 使用 `%{{variable}}` 来存储输入。

## 4. 组合元素

您可以将按钮/选项与输入字段组合，以提供预设选择和自定义输入。

### 带按钮的输入

示例：

```markdown
我们该如何称呼您？

?[%{{title}} 先生 | 女士 | 博士 | 教授 | ...其他（请说明）]

我们将称呼您为：{{title}}
```

### 带选项的输入

示例：

```markdown
选择您的技能或添加新技能：

?[%{{skills}} Python || JavaScript || Go || Rust || ...添加其他技能]

您的技能组包括：{{skills}}
```

## 提示和最佳实践

### 文本适应和 ID

LLM 可能会根据上下文（翻译、重新措辞）适应按钮/选项文本和输入提示。当您需要一致的值时使用 ID：

**不带 ID - 适应的值：**

- 英语："Continue" → 存储 "Continue"
- 中文："继续" → 存储 "继续"

**带 ID - 固定值：**

- 英语："Continue//continue" → 存储 "continue"
- 中文："继续//continue" → 存储 "continue"

### 最佳实践

1. **使用按钮**当用户只能选择一个选项时（难度、账户类型）
2. **使用选项**当用户可以选择多个项目时（技能、偏好）
3. **使用输入**当您需要自定义文本时（姓名、反馈、数量）
4. **使用 ID**当您需要跨语言的一致后端值时
5. **组合元素**以提供便利性和灵活性
